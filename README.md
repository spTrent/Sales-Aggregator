# Sales Aggregator

## Веб‑сервис для поиска, публикации и оценки студенческих скидок.

## Описание проекта:

Приложение позволяет студентам делиться информацией о скидках (кафе, магазины и т.д.), оценивать чужие предложения и сохранять понравившиеся в избранное. Посты можно фильтровать по категориям и сортировать по новизне или рейтингу

## Основной функционал:

- Регистрация и авторизация пользователей.
- Просмотр списка скидок на главной странице.
- Фильтрация по категориям и сортировка по рейтингу или дате.
- Создание собственных постов о скидках.
- Голосование за посты (`лайк`/`дизлайк`), формирование рейтинга.
- Добавление постов в избранное и отдельная страница избранных.
- Страница `Мои посты` для управления своими публикациями.
- Админ‑панель Django для модерации контента и пользователей.

## Технологии:

- Язык: `Python 3.11+`
- Фреймворк: `Django`
- База данных: `PostgreSQL`
- Шаблоны: `Django templates` (`HTML`, `CSS`, `JS`)
- Дополнительно: `Django admin`, аутентификация через стандартную систему Django.

## Разработка и качество кода:

В проекте используются следующие инструменты:

- `uv` - пакетный менеджер.
- `ruff` - линтер и форматтер.
- `mypy` - статическая проверка типов.
- `pre-commit` - автозапуск проверок перед каждым коммитом.

## Структура проекта (основное):
```
Sales_Aggregator/
├─ Sales_Aggregator/
│ ├─ settings.py
│ ├─ urls.py
│ └─ ...
├─ users/
│ ├─ models.py
│ ├─ forms.py
│ ├─ views.py
│ └─ templates/users/
├─ discounts/
│ ├─ models.py
│ ├─ forms.py
│ ├─ views.py
│ └─ templates/discounts/
└─ manage.py
```

### Основные модели:

**Category**

- Название категории (еда, транспорт, развлечения и т.п.).
- Используется для фильтрации постов.

**Post**

- Заголовок.
- Описание условий скидки.
- Место (магазин, кафе и т.д.).
- Категория.
- Автор (пользователь).
- Дата создания и обновления.
- Вычисляемое свойство `rating` (разница лайков и дизлайков).

**Vote**

- Пользователь.
- Пост.
- Тип голоса (`лайк` или `дизлайк`).
- Используется для формирования рейтинга поста.

**Favorite**

- Пользователь.
- Пост.
- Дата добавления.
- Список избранных постов пользователя.

## Ссылка на docker-образ:

```
https://hub.docker.com/repository/docker/sptrent/sales-aggregator-web/general
```

## Установка и запуск (локально):

1. **Клонировать репозиторий:**

        git clone https://github.com/spTrent/Sales-Aggregator.git
        cd Sales-Aggregator


2. **Создать и активировать виртуальное окружение (Linux/macOS):**

        uv venv
        source .venv/bin/activate

    2.1 **(Windows):**

        .venv\Scripts\activate


3. **Установить зависимости:**

        uv sync

4. **Создать БД:**

        sudo -u postgres psql
        CREATE USER sales_user WITH PASSWORD 'qwerty123';
        CREATE DATABASE sales_aggregator_db OWNER sales_user;
        \q

5. **Применить миграции базы данных:**

        cd Sales_Aggregator
        python manage.py makemigrations users
        python manage.py migrate
        python manage.py loaddata data_backup.json


6. **Запустить сервер разработки:**

        python manage.py runserver


7. **Открыть в браузере:**

- `http://127.0.0.1:8000/` — главная страница со скидками.
- `http://127.0.0.1:8000/admin/` — админ-панель.

## Основные страницы:

- Главная (`/`) — список всех постов, фильтры по категориям, сортировка по рейтингу/дате.
- Регистрация (`/users/register/`) — создание учётной записи.
- Вход (`/users/login/`) — авторизация.
- Мои посты (`/my-posts/` или аналогичный путь) — посты текущего пользователя.
- Избранное (`/favorites/`) — сохранённые посты.
- Админ‑панель (`/admin/`) — управление пользователями и постами.

## Развитие проекта

Возможные направления доработки:

- Подключение Docker для продакшн‑развёртывания.
- Добавление тегов, городов и геолокации к скидкам.
- Комментарии к постам.
- Парсинг скидок с крупных платформ со скидками
