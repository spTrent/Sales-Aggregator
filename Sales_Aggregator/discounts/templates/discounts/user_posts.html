{% extends 'discounts/base.html' %}

{% block title %}–ú–æ–∏ –ø–æ—Å—Ç—ã - StudCheck{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2>–ú–æ–∏ –ø–æ—Å—Ç—ã –æ —Å–∫–∏–¥–∫–∞—Ö</h2>
    <a href="{% url 'create_post' %}" class="btn btn-primary">+ –î–æ–±–∞–≤–∏—Ç—å —Å–∫–∏–¥–∫—É</a>
</div>

{% if posts %}
    {% for post in posts %}
    <div class="card post-card">
        <div class="card-body">
            <div class="d-flex justify-content-between align-items-start">
                <h5 class="card-title">{{ post.title }}</h5>
                <div>
                    <span class="badge bg-secondary">{{ post.category.name }}</span>
                    <span class="badge {% if post.rating > 0 %}bg-success{% elif post.rating < 0 %}bg-danger{% else %}bg-secondary{% endif %}">
                        –†–µ–π—Ç–∏–Ω–≥: {{ post.rating }}
                    </span>
                </div>
            </div>
            
            <p class="card-text">{{ post.description }}</p>
            
            <div class="mb-2">
                <strong>–ú–µ—Å—Ç–æ:</strong> {{ post.place }}
            </div>
            
            <div class="d-flex justify-content-between align-items-center">
                <small class="text-muted">
                    –°–æ–∑–¥–∞–Ω: {{ post.created_at|date:"d.m.Y H:i" }}<br>
                    –û–±–Ω–æ–≤–ª–µ–Ω: {{ post.updated_at|date:"d.m.Y H:i" }}
                </small>
                <div>
                    <span class="text-success">üëç {{ post.upvotes_count|default:0 }}</span>
                    <span class="text-danger ms-2">üëé {{ post.downvotes_count|default:0 }}</span>
                    <span class="text-warning ms-2">‚≠ê {{ post.favorited_by.count }}</span>
                </div>
            </div>
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="text-center py-5">
        <h4>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –ø–æ—Å—Ç–æ–≤</h4>
        <p class="text-muted">–ü–æ–¥–µ–ª–∏—Ç–µ—Å—å –ø–µ—Ä–≤–æ–π —Å–∫–∏–¥–∫–æ–π —Å –¥—Ä—É–≥–∏–º–∏ —Å—Ç—É–¥–µ–Ω—Ç–∞–º–∏!</p>
        <a href="{% url 'create_post' %}" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å –ø–µ—Ä–≤—É—é —Å–∫–∏–¥–∫—É</a>
    </div>
{% endif %}
{% endblock %}